>> write a python script that sends the entire balance of an ETH address to another address using estimated fees

Here's a Python script that sends the entire balance of an Ethereum address to another address, estimating gas fees using the Web3.py library. Make sure you have Web3.py installed (`pip install web3`) and an Ethereum node or provider like Infura set up.

```python
from web3 import Web3
from eth_account import Account

# Connect to Ethereum node (replace with your Infura or node URL)
infura_url = "https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID"
w3 = Web3(Web3.HTTPProvider(infura_url))

# Sender's private key (replace with your private key - KEEP THIS SECURE)
private_key = "YOUR_PRIVATE_KEY"
sender_address = Account.from_key(private_key).address

# Recipient address (replace with the target address)
recipient_address = "TARGET_ADDRESS"

# Check if connected to Ethereum network
if not w3.is_connected():
    print("Not connected to Ethereum network")
    exit()

# Get sender's balance
balance = w3.eth.get_balance(sender_address)
print(f"Sender balance: {w3.from_wei(balance, 'ether')} ETH")

# Estimate gas price and gas limit
gas_price = w3.eth.gas_price
gas_limit = w3.eth.estimate_gas({
    'from': sender_address,
    'to': recipient_address,
    'value': balance
})

# Calculate total gas cost
gas_cost = gas_price * gas_limit
print(f"Estimated gas cost: {w3.from_wei(gas_cost, 'ether')} ETH")

# Calculate amount to send (balance minus gas cost)
amount_to_send = balance - gas_cost
print(f"Amount to send: {w3.from_wei(amount_to_send, 'ether')} ETH")

if amount_to_send <= 0:
    print("Insufficient funds to cover gas fees")
    exit()

# Build the transaction
nonce = w3.eth.get_transaction_count(sender_address)
tx = {
    'nonce': nonce,
    'to': recipient_address,
    'value': amount_to_send,
    'gas': gas_limit,
    'gasPrice': gas_price
}

# Sign the transaction
signed_tx = w3.eth.account.sign_transaction(tx, private_key)

# Send the transaction
try:
    tx_hash = w3.eth.send_raw_transaction(signed_tx.rawTransaction)
    print(f"Transaction sent! Tx hash: {tx_hash.hex()}")
    print(f"Check status at: https://etherscan.io/tx/{tx_hash.hex()}")
except Exception as e:
    print(f"Error sending transaction: {e}")
```

Important notes:
1. Replace `YOUR_INFURA_PROJECT_ID` with your actual Infura project ID or use another Ethereum node URL.
2. Replace `YOUR_PRIVATE_KEY` with the sender's private key. Never share this or hardcode it in a real application—use environment variables or a secure wallet.
3. Replace `TARGET_ADDRESS` with the recipient's Ethereum address.
4. This script estimates gas fees based on current network conditions, but fees can fluctuate. Double-check before sending.
5. Test on a testnet (like Ropsten or Sepolia) first to avoid losing real funds.
6. Ensure you have enough ETH to cover gas fees; the script subtracts the estimated gas cost from the balance.

Run this in a secure environment, as exposing private keys can lead to loss of funds. Let me know if you need help with setup or modifications.