>> now make it get the current ETH price and not send if fee is more than $2

Here's the updated Python script that fetches the current ETH price using the CoinGecko API (via the `pycoingecko` library) and prevents sending if the estimated gas fee exceeds $2 USD. Make sure to install the required libraries: `pip install web3 pycoingecko`.

```python
from web3 import Web3
from eth_account import Account
from pycoingecko import CoinGeckoAPI

# Initialize CoinGecko API client
cg = CoinGeckoAPI()

# Connect to Ethereum node (replace with your Infura or node URL)
infura_url = "https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID"
w3 = Web3(Web3.HTTPProvider(infura_url))

# Sender's private key (replace with your private key - KEEP THIS SECURE)
private_key = "YOUR_PRIVATE_KEY"
sender_address = Account.from_key(private_key).address

# Recipient address (replace with the target address)
recipient_address = "TARGET_ADDRESS"

# Check if connected to Ethereum network
if not w3.is_connected():
    print("Not connected to Ethereum network")
    exit()

# Get current ETH price in USD
try:
    eth_price_data = cg.get_price(ids='ethereum', vs_currencies='usd')
    eth_price_usd = eth_price_data['ethereum']['usd']
    print(f"Current ETH price: ${eth_price_usd}")
except Exception as e:
    print(f"Error fetching ETH price: {e}")
    exit()

# Get sender's balance
balance = w3.eth.get_balance(sender_address)
print(f"Sender balance: {w3.from_wei(balance, 'ether')} ETH")

# Estimate gas price and gas limit
gas_price = w3.eth.gas_price
gas_limit = w3.eth.estimate_gas({
    'from': sender_address,
    'to': recipient_address,
    'value': balance
})

# Calculate total gas cost in ETH and USD
gas_cost_eth = gas_price * gas_limit
gas_cost_usd = w3.from_wei(gas_cost_eth, 'ether') * eth_price_usd
print(f"Estimated gas cost: {w3.from_wei(gas_cost_eth, 'ether')} ETH (${gas_cost_usd:.2f})")

# Check if gas cost exceeds $2 USD
if gas_cost_usd > 2.0:
    print("Gas fee exceeds $2 USD. Transaction aborted.")
    exit()

# Calculate amount to send (balance minus gas cost)
amount_to_send = balance - gas_cost_eth
print(f"Amount to send: {w3.from_wei(amount_to_send, 'ether')} ETH")

if amount_to_send <= 0:
    print("Insufficient funds to cover gas fees")
    exit()

# Build the transaction
nonce = w3.eth.get_transaction_count(sender_address)
tx = {
    'nonce': nonce,
    'to': recipient_address,
    'value': amount_to_send,
    'gas': gas_limit,
    'gasPrice': gas_price
}

# Sign the transaction
signed_tx = w3.eth.account.sign_transaction(tx, private_key)

# Send the transaction
try:
    tx_hash = w3.eth.send_raw_transaction(signed_tx.rawTransaction)
    print(f"Transaction sent! Tx hash: {tx_hash.hex()}")
    print(f"Check status at: https://etherscan.io/tx/{tx_hash.hex()}")
except Exception as e:
    print(f"Error sending transaction: {e}")
```

Important notes:
1. Replace `YOUR_INFURA_PROJECT_ID` with your actual Infura project ID or node URL.
2. Replace `YOUR_PRIVATE_KEY` with the sender's private key. Keep it secure—use environment variables in production.
3. Replace `TARGET_ADDRESS` with the recipient's Ethereum address.
4. The script uses CoinGecko to fetch the current ETH price in USD and calculates the gas fee in USD to enforce the $2 limit.
5. Test on a testnet (like Ropsten or Sepolia) first to avoid losing real funds.
6. Gas fees and ETH price can fluctuate rapidly, so the $2 limit check is based on the moment of execution.

Run this in a secure environment to protect your private key. Let me know if you need tweaks or help with setup.